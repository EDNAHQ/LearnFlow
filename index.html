<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="/EDNA Logo.png">
    <title>LearnFlow - Personalized Learning Paths</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
      /* Critical first-paint CSS to avoid UA defaults and font flashes */
      html, body { height: 100%; }
      body { margin: 0; background: #ffffff; color: #0b0c18; font-family: 'Poppins', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', sans-serif; font-weight: 300; }
      #root, #portal-root { isolation: isolate; }

      /* HelpGenie widget button customization */
      [id*="hg"][class*="widget"] button,
      [id*="hg"] button,
      div[style*="position: fixed"] button {
        width: 70px !important;
        height: 70px !important;
        background: white !important;
        border: 3px solid transparent !important;
        background-image: linear-gradient(white, white), linear-gradient(135deg, hsl(var(--brand-blue)), hsl(var(--brand-pink))) !important;
        background-origin: border-box !important;
        background-clip: padding-box, border-box !important;
        border-radius: 50% !important;
      }

      /* Scale the icon inside */
      [id*="hg"][class*="widget"] button svg,
      [id*="hg"] button svg,
      div[style*="position: fixed"] button svg {
        transform: scale(1.5) !important;
      }
    </style>

    <!-- Primary Meta Tags -->
    <meta name="title" content="LearnFlow - Personalized Learning Paths">
    <meta name="description" content="Master any topic with personalized learning paths that adapt to your pace. Transform your knowledge with intelligent, adaptive education.">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://learnflow.app/">
    <meta property="og:title" content="LearnFlow - Personalized Learning Paths">
    <meta property="og:description" content="Master any topic with personalized learning paths that adapt to your pace. Transform your knowledge with intelligent, adaptive education.">
    <meta property="og:image" content="https://learnflow.app/images/sam.mckay.edna_Network_of_nodes_connected_by_glowing_lines_ea_1fa62e10-cb69-40e5-bb59-618e8919caf8_1.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://learnflow.app/">
    <meta property="twitter:title" content="LearnFlow - Personalized Learning Paths">
    <meta property="twitter:description" content="Master any topic with personalized learning paths that adapt to your pace. Transform your knowledge with intelligent, adaptive education.">
    <meta property="twitter:image" content="https://learnflow.app/images/sam.mckay.edna_Network_of_nodes_connected_by_glowing_lines_ea_1fa62e10-cb69-40e5-bb59-618e8919caf8_1.png">

    <!-- Theme Color -->
    <meta name="theme-color" content="#6654f5">
</head>
<body>
    <div id="root"></div>
    <div id="portal-root"></div>

    <!-- SSO Loading Screen - Shows immediately when SSO parameters are detected -->
    <script>
      (function() {
        var params = new URLSearchParams(window.location.search);
        var sso = params.get('sso');
        var sig = params.get('sig');

        if (sso && sig) {
          // Immediately show loading screen before React loads
          var root = document.getElementById('root');
          if (root) {
            root.innerHTML = '<div id="sso-loading-screen" style="display: flex; align-items: center; justify-content: center; min-height: 100vh; background-color: white; position: fixed; top: 0; left: 0; right: 0; bottom: 0; z-index: 999999;"><div style="animation: sso-pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;"><img src="/EDNA Logo.png" alt="EDNA" style="width: 128px; height: 128px; object-fit: contain;" /></div></div>';

            // Add the keyframe animation
            var style = document.createElement('style');
            style.textContent = '@keyframes sso-pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }';
            document.head.appendChild(style);
          }
        }
      })();
    </script>

    <script type="module" src="/src/main.tsx"></script>

    <!-- HelpGenie Widget -->
    <script>
      (function(w,d,s,o,f,js,fjs){
        w[o]=w[o]||function(){(w[o].q=w[o].q||[]).push(arguments)};
        w[o].q=w[o].q||[];
        js=d.createElement(s),fjs=d.getElementsByTagName(s)[0];
        js.id=o;js.src=f;js.async=1;fjs.parentNode.insertBefore(js,fjs);
      }(window,document,'script','hg','https://helpgenie.ai/widget.js'));

      hg('init', {
        agentUrl: 'feedback-genie',
        position: 'bottom-right',
        primaryColor: '#6654f5',
        buttonColor: '#f5f5f5',
        baseUrl: 'https://helpgenie.ai',
        agentName: 'Enterprise DNA',
        customAvatarUrl: 'https://vdskjkjxyeehklwxnhrf.supabase.co/storage/v1/object/public/genie-images/i291wa4-1764809388319.png',
        showLabel: true,
        label: 'Need help?',
        dotSize: 12
      });
    </script>
    <!-- End HelpGenie Widget -->

    <script src="https://enterprisedna.co/widget/ecosystem-widget.js" data-button-color="#6654f5"></script>
</body>
</html>